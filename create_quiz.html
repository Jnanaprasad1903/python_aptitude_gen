<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create New Quiz</title>
    <style>
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #123a6e 30%, #ffffff 100%);
      color: #123a6e;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    h2 {
      text-align: center;
      margin-top: 30px;
      color: white;
      font-size: 2.8em;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    .container {
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 30px;
      max-width: 800px;
      width: 95%;
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
      margin-bottom: 30px;
    }

    form {
      display: grid;
      gap: 20px;
    }

    input[type="text"], input[type="number"], select {
      padding: 12px 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1em;
      width: 100%;
      box-sizing: border-box;
    }

    .question-types {
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
    }

    .question-types h3 {
      margin-top: 0;
      color: #123a6e;
      font-size: 1.3em;
      margin-bottom: 15px;
    }

    .question-types label {
      display: block;
      margin-bottom: 10px;
    }

    button {
      background-color: #123a6e;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 25px;
      font-size: 1.1em;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    button:hover {
      background-color: #1b4e8f;
      transform: translateY(-2px);
    }

    .error {
      color: #dc3545;
      background-color: rgba(220, 53, 69, 0.1);
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 15px;
    }

    #confirmation {
      display: none;
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 25px;
      margin-top: 20px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    }

    #confirmation h3 {
      color: #123a6e;
    }

    footer {
      margin-top: auto;
      color: white;
      text-align: center;
      font-size: 0.9em;
      padding: 15px 0;
    }

    .language-select {
      align-self: flex-end;
      margin-bottom: 10px;
      margin-right: 20px;
    }
  </style>
  <script>
    
    function showConfirmation() {
      const form = document.getElementById('quizForm');
      const selectedTypes = Array.from(form.querySelectorAll('input[name="question_types"]:checked')).map(cb => cb.value);
      if (!selectedTypes.length) {
        alert('Please select at least one category.');
        return false;
      }
      document.getElementById('confirmQuizName').textContent = form.quiz_name.value;
      document.getElementById('confirmNumQuestions').textContent = form.num_questions.value;
      document.getElementById('confirmDifficulty').textContent = form.difficulty.value;
      document.getElementById('confirmSelectionMode').textContent = form.selection_mode.value;
      document.getElementById('selectedTypes').textContent = selectedTypes.join(', ');
      document.getElementById('confirmation').style.display = 'block';
      return false;
    }
    function confirmSubmission() {
      document.getElementById('quizForm').submit();
    }
    function cancelConfirmation() {
      document.getElementById('confirmation').style.display = 'none';
    }
  </script>
</head>
<script>
  const translations = {
    en: {
      title: "Create New Quiz",
      quizName: "Quiz Name",
      numQuestions: "Number of Questions",
      difficulty: "Difficulty",
      easy: "Easy",
      medium: "Medium",
      hard: "Hard",
      selectionMode: "Selection Mode",
      multiple: "Multiple Choice",
      categories: "Select Categories:",
      mixture: "Mixture and Alligation",
      profit: "Profit and Loss",
      pipes: "Pipes and Cisterns",
      age: "Age",
      maths: "Maths",
class8: "Class 8",
class9: "Class 9",
class10: "Class 10",

      permutation: "Permutation and Combination",
      speed: "Speed Time Distance",
      interest: "Simple Interest",
      calendar: "Calendars",
      createQuiz: "Create Quiz"
    },
    hi: {
      title: "नई प्रश्नोत्तरी बनाएँ",
      quizName: "प्रश्नोत्तरी नाम",
      numQuestions: "प्रश्नों की संख्या",
      difficulty: "कठिनाई स्तर",
      easy: "आसान",
      medium: "मध्यम",
       maths: "गणित",
    class8: "कक्षा 8",
    class9: "कक्षा 9",
    class10: "कक्षा 10",
      hard: "कठिन",
      selectionMode: "चयन मोड",
      multiple: "बहुविकल्पीय",
      categories: "श्रेणियाँ चुनें:",
      mixture: "मिश्रण और अनुपात",
      profit: "लाभ और हानि",
      pipes: "पाइप्स और सिस्टर्न",
      age: "उम्र",
      permutation: "क्रमचय और संचय",
      speed: "गति समय दूरी",
      interest: "साधारण ब्याज",
      calendar: "कैलेंडर",
      createQuiz: "प्रश्नोत्तरी बनाएँ"
    },
    kn: {
      title: "ಹೊಸ ಪ್ರಶ್ನಾವಳಿ ರಚಿಸಿ",
      quizName: "ಪ್ರಶ್ನಾವಳಿ ಹೆಸರು",
      numQuestions: "ಪ್ರಶ್ನೆಗಳ ಸಂಖ್ಯೆ",
      difficulty: "ಕಷ್ಟದ ಮಟ್ಟ",
      easy: "ಸಹಜ",
      medium: "ಮಧ್ಯಮ",
      hard: "ಕಷ್ಟಕರ",
      selectionMode: "ಆಯ್ಕೆ ವಿಧಾನ",
      multiple: "ಬಹು ಆಯ್ಕೆ",
      categories: "ವರ್ಗಗಳನ್ನು ಆಯ್ಕೆಮಾಡಿ:",
      mixture: "ಮಿಶ್ರಣ ಮತ್ತು ಮೌಲ್ಯ",
      profit: "ಲಾಭ ಮತ್ತು ನಷ್ಟ",
      pipes: "ಪೈಪುಗಳು ಮತ್ತು ಸಿಸ್ಟರ್ನ್",
      age: "ವಯಸ್ಸು",
      permutation: "Permutation ಮತ್ತು Combination",
      speed: "ವೇಗ ಸಮಯ ದೂರ",
      interest: "ಸರಳ ಬಡ್ಡಿ",
      calendar: "ಕ್ಯಾಲೆಂಡರ್‌ಗಳು", 
      maths: "ಗಣಿತ",
    class8: "ದರ್ಜೆ 8",
    class9: "ದರ್ಜೆ 9",
    class10: "ದರ್ಜೆ 10",
      createQuiz: "ಪ್ರಶ್ನಾವಳಿ ರಚಿಸಿ"
    }
  };

  window.addEventListener('DOMContentLoaded', function () {
    const lang = "{{ language }}";
    const languageSelect = document.getElementById("languageSelect");

    function applyLanguage(lang) {
      // Text content
      document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });

      // Placeholder
      document.querySelectorAll('[data-placeholder-key]').forEach(el => {
        const key = el.getAttribute('data-placeholder-key');
        if (translations[lang][key]) {
          el.placeholder = translations[lang][key];
        }
      });

      // <option> values
      document.querySelectorAll('option[data-key]').forEach(opt => {
        const key = opt.getAttribute('data-key');
        if (translations[lang][key]) {
          opt.textContent = translations[lang][key];
        }
      });
    }

    if (languageSelect) {
      languageSelect.value = lang;
      languageSelect.addEventListener("change", function () {
        const selectedLang = this.value;
        fetch(`/set_language/${selectedLang}`).then(() => location.reload());
      });
    }

    applyLanguage(lang);
  });
  function toggleMathsClasses(parentCheckbox) {
  const subDiv = document.getElementById('mathsClasses');
  subDiv.style.display = parentCheckbox.checked ? 'block' : 'none';

  // Uncheck all subcategories if unchecked
  if (!parentCheckbox.checked) {
    subDiv.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
  }
}

</script>




<body>
  <!-- Language Selector -->
  <div class="language-select">
    <label for="languageSelect" style="color:white;">Language:</label>
    <select id="languageSelect" class="p-2 rounded text-blue-900">
      <option value="en">English</option>
      <option value="hi">हिंदी</option>
      <option value="kn">ಕನ್ನಡ</option>
    </select>
  </div>


  <h2 data-key="title">Create New Quiz</h2>



  
  <div class="container">
    {% if error %}
      <div class="error">{{ error }}</div>
    {% endif %}
    <form id="quizForm" method="POST" onsubmit="return showConfirmation()">
      <input type="text" name="quiz_name" required data-placeholder-key="quizName">
<input type="number" name="num_questions" min="1" max="50" required data-placeholder-key="numQuestions">


<select name="difficulty" required>
  <option value="">--</option>
  <option value="easy" data-key="easy">Easy</option>
  <option value="medium" data-key="medium">Medium</option>
  <option value="hard" data-key="hard">Hard</option>
</select>

      <select name="selection_mode" required>
        <option value="multiple">Multiple Choice</option>
      </select>
      <div class="question-types">
  <h3 data-key="categories">Select Categories:</h3>

  <label>
    <input type="checkbox" name="question_types" value="mixture_alligation">
    <span data-key="mixture">Mixture and Alligation</span>
  </label>

  <label>
    <input type="checkbox" name="question_types" value="profit_loss">
    <span data-key="profit">Profit and Loss</span>
  </label>

  <label>
    <input type="checkbox" name="question_types" value="pipes_cisterns">
    <span data-key="pipes">Pipes and Cisterns</span>
  </label>

  <label>
    <input type="checkbox" name="question_types" value="age">
    <span data-key="age">Age</span>
  </label>

  <label>
    <input type="checkbox" name="question_types" value="permutation_combination">
    <span data-key="permutation">Permutation and Combination</span>
  </label>

  <label>
    <input type="checkbox" name="question_types" value="speed_time_distance">
    <span data-key="speed">Speed Time Distance</span>
  </label>

  <label>
    <input type="checkbox" name="question_types" value="simple_interest">
    <span data-key="interest">Simple Interest</span>
  </label>

  <label>
    <input type="checkbox" name="question_types" value="calendars">
    <span data-key="calendar">Calendars</span>
  </label>
<!-- ✅ Maths parent category -->
<label>
  <input type="checkbox" id="maths_parent" onclick="toggleMathsClasses(this)">
  <span data-key="maths">Maths</span>
</label>

<div id="mathsClasses" style="margin-left: 20px; display: none;">
  <label>
    <input type="checkbox" name="question_types" value="Math_8th">
    <span data-key="class8">Class 8</span>
  </label>
  <label>
    <input type="checkbox" name="question_types" value="Math_9th">
    <span data-key="class9">Class 9</span>
  </label>
  <label>
    <input type="checkbox" name="question_types" value="Math_10th">
    <span data-key="class10">Class 10</span>
  </label>
</div>



      <button type="submit" data-key="createQuiz">Create Quiz</button>

    </form>

    <div id="confirmation">
      <h3>Confirm Quiz Details</h3>
      <p><strong>Quiz Name:</strong> <span id="confirmQuizName"></span></p>
      <p><strong>Number of Questions:</strong> <span id="confirmNumQuestions"></span></p>
      <p><strong>Difficulty:</strong> <span id="confirmDifficulty"></span></p>
      <p><strong>Selection Mode:</strong> <span id="confirmSelectionMode"></span></p>
      <p><strong>Categories:</strong> <span id="selectedTypes"></span></p>
      <div class="button-group">
        <button onclick="confirmSubmission()">Confirm & Create</button>
        <button onclick="cancelConfirmation()">Cancel</button>
      </div>
    </div>
  </div>
  <footer>&copy; 2025 Quiz Creator. All rights reserved.</footer>
</body>
</html>
